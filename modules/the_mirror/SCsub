Import("env")
Import("env_modules")

# For MP3 support in TMFileUtil.
if env["module_minimp3_enabled"]:
    thirdparty_dir = "#thirdparty/minimp3/"
    if not env.msvc:
        env_modules.Append(CPPFLAGS=["-isystem", Dir(thirdparty_dir).path])
    else:
        env_modules.Prepend(CPPPATH=[thirdparty_dir])
    env_modules.Append(CPPDEFINES=["MINIMP3_ONLY_MP3"])

# For OGG Vorbis support in TMFileUtil.
if env["module_vorbis_enabled"]:
    thirdparty_dir = "#thirdparty/libvorbis/"
    env_modules.Prepend(CPPPATH=[thirdparty_dir])
    if env["builtin_libogg"]:
        env_modules.Prepend(CPPPATH=["#thirdparty/libogg"])

env_themirror_module = env_modules.Clone()

env_themirror_module.add_source_files(env.modules_sources, "*.cpp")
env_themirror_module.add_source_files(env.modules_sources, "script/*.cpp")
env_themirror_module.add_source_files(env.modules_sources, "util/*.cpp")
